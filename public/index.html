<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Oyun Platformu</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: #1a1a2e; color: #fff; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        .landing { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; }
        .landing h1 { font-size: 48px; margin-bottom: 20px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .landing-buttons { display: flex; gap: 20px; margin-top: 30px; }
        .btn { padding: 15px 30px; font-size: 18px; border: none; border-radius: 10px; cursor: pointer; transition: transform 0.2s; font-weight: 600; }
        .btn:hover { transform: scale(1.05); }
        .btn-primary { background: #fff; color: #667eea; }
        .btn-secondary { background: rgba(255,255,255,0.2); color: #fff; border: 2px solid #fff; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 3000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: #2d2d44; padding: 30px; border-radius: 15px; width: 90%; max-width: 400px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .modal h2 { color: #667eea; margin-bottom: 20px; text-align: center; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #ccc; font-weight: 500; }
        .form-input { width: 100%; padding: 12px; border: 1px solid #444; border-radius: 8px; font-size: 15px; background: #1a1a2e; color: #fff; outline: none; }
        .form-input:focus { border-color: #667eea; }
        .button-group { display: flex; gap: 10px; margin-top: 20px; }
        
        .chat-interface { display: none; flex: 1; flex-direction: column; }
        .header { background: #2d2d44; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        .header-left { display: flex; align-items: center; gap: 15px; }
        .room-code { background: rgba(102, 126, 234, 0.2); padding: 8px 15px; border-radius: 8px; font-weight: 600; letter-spacing: 1px; }
        .container { display: flex; flex: 1; overflow: hidden; }
        
        .video-section { flex: 2; display: flex; flex-direction: column; background: #000; }
        .video-container { flex: 1; display: flex; align-items: center; justify-content: center; background: #000; position: relative; }
        .video-player { width: 100%; height: 100%; max-height: 70vh; object-fit: contain; }
        .no-video { text-align: center; padding: 60px 20px; color: #666; }
        .no-video-icon { font-size: 64px; margin-bottom: 20px; }
        .upload-zone { margin-top: 20px; }
        
        .chat-section { flex: 1; display: flex; flex-direction: column; background: #1a1a2e; border-left: 1px solid #2d2d44; min-width: 300px; max-width: 400px; }
        .messages { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .message { display: flex; gap: 10px; max-width: 80%; }
        .message.own { align-self: flex-end; flex-direction: row-reverse; }
        .message-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
        .message-content { padding: 10px 15px; border-radius: 10px; background: #2d2d44; }
        .message.own .message-content { background: #667eea; }
        .message-sender { font-size: 12px; font-weight: 600; margin-bottom: 4px; }
        .message-text { font-size: 14px; word-wrap: break-word; }
        .message-time { font-size: 11px; color: #999; margin-top: 4px; }
        
        .input-container { padding: 15px; background: #2d2d44; display: flex; gap: 10px; align-items: center; }
        .message-input { flex: 1; padding: 12px; border: none; border-radius: 20px; background: #1a1a2e; color: #fff; outline: none; resize: none; max-height: 100px; }
        .send-button { background: #667eea; color: #fff; border: none; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .send-button:hover { background: #5568d3; }
        
        .users-sidebar { width: 250px; background: #2d2d44; padding: 20px; overflow-y: auto; }
        .users-sidebar h3 { margin-bottom: 15px; color: #667eea; }
        .user-item { display: flex; align-items: center; gap: 10px; padding: 10px; border-radius: 8px; margin-bottom: 8px; background: #1a1a2e; }
        .user-avatar { width: 35px; height: 35px; border-radius: 50%; }
        .user-name { font-size: 14px; flex: 1; }
        .owner-badge { background: #ffd700; color: #000; padding: 2px 8px; border-radius: 5px; font-size: 11px; font-weight: 600; margin-left: 5px; }
        
        .video-controls { padding: 15px; background: #1a1a2e; display: flex; gap: 10px; justify-content: center; }
        .control-btn { padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600; }
        .upload-btn { background: #667eea; color: #fff; }
        .delete-btn { background: #e74c3c; color: #fff; }
        
        @media (max-width: 768px) {
            .container { flex-direction: column; }
            .chat-section { max-width: 100%; border-left: none; border-top: 1px solid #2d2d44; }
            .users-sidebar { display: none; }
        }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1a1a2e; }
        ::-webkit-scrollbar-thumb { background: #667eea; border-radius: 4px; }
        
        .hidden { display: none !important; }
        .loading { text-align: center; padding: 20px; color: #667eea; }
    </style>
</head>
<body>
    <div class="landing" id="landingPage">
        <h1>ðŸŽ¬ Video Oyun Platformu</h1>
        <p style="font-size: 18px; margin-bottom: 40px;">ArkadaÅŸlarÄ±nÄ±zla birlikte video izleyin!</p>
        <div class="landing-buttons">
            <button class="btn btn-primary" id="createRoomBtn">Oda OluÅŸtur</button>
            <button class="btn btn-secondary" id="joinRoomBtn">Odaya KatÄ±l</button>
        </div>
    </div>

    <div class="modal" id="userInfoModal">
        <div class="modal-content">
            <h2>KullanÄ±cÄ± Bilgileri</h2>
            <div class="form-group">
                <label>KullanÄ±cÄ± AdÄ±nÄ±z</label>
                <input type="text" id="userNameInput" class="form-input" placeholder="AdÄ±nÄ±zÄ± girin" maxlength="20">
            </div>
            <div class="form-group">
                <label>Profil FotoÄŸrafÄ± (Opsiyonel)</label>
                <input type="file" id="userPhotoInput" class="form-input" accept="image/*">
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" id="cancelUserInfo">Ä°ptal</button>
                <button class="btn btn-primary" id="confirmUserInfo">Devam</button>
            </div>
        </div>
    </div>

    <div class="modal" id="createRoomModal">
        <div class="modal-content">
            <h2>Oda OluÅŸtur</h2>
            <div class="form-group">
                <label>Oda AdÄ±</label>
                <input type="text" id="roomNameInput" class="form-input" placeholder="Oda adÄ±nÄ± girin">
            </div>
            <div class="form-group">
                <label>Åžifre (Opsiyonel)</label>
                <input type="password" id="roomPasswordInput" class="form-input" placeholder="Åžifre (boÅŸ bÄ±rakabilirsiniz)">
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" id="cancelCreateRoom">Ä°ptal</button>
                <button class="btn btn-primary" id="confirmCreateRoom">OluÅŸtur</button>
            </div>
        </div>
    </div>

    <div class="modal" id="joinRoomModal">
        <div class="modal-content">
            <h2>Odaya KatÄ±l</h2>
            <div class="form-group">
                <label>Oda Kodu</label>
                <input type="text" id="roomCodeInput" class="form-input" placeholder="6 haneli kod" maxlength="6" style="text-transform: uppercase;">
            </div>
            <div class="form-group">
                <label>Åžifre (Gerekiyorsa)</label>
                <input type="password" id="joinPasswordInput" class="form-input" placeholder="Åžifre">
            </div>
            <div class="button-group">
                <button class="btn btn-secondary" id="cancelJoinRoom">Ä°ptal</button>
                <button class="btn btn-primary" id="confirmJoinRoom">KatÄ±l</button>
            </div>
        </div>
    </div>

    <div class="chat-interface" id="chatInterface">
        <div class="header">
            <div class="header-left">
                <div>
                    <div id="roomNameDisplay" style="font-size: 18px; font-weight: 600;">Oda</div>
                    <div class="room-code" id="roomCodeDisplay">ABC123</div>
                </div>
            </div>
            <div id="onlineCount" style="background: rgba(102, 126, 234, 0.2); padding: 8px 15px; border-radius: 8px;">0 kiÅŸi</div>
        </div>

        <div class="container">
            <div class="video-section">
                <div class="video-container" id="videoContainer">
                    <div class="no-video" id="noVideo">
                        <div class="no-video-icon">ðŸ“¹</div>
                        <h3>HenÃ¼z Video Yok</h3>
                        <p>Oda sahibi video yÃ¼klediÄŸinde burada gÃ¶rÃ¼necek</p>
                        <div class="upload-zone" id="uploadZone" style="display: none;">
                            <input type="file" id="videoFileInput" accept="video/*" style="display: none;">
                            <button class="btn btn-primary" id="selectVideoBtn">Video SeÃ§ ve YÃ¼kle</button>
                        </div>
                    </div>
                    <video id="videoPlayer" class="video-player" controls style="display: none;"></video>
                </div>
                <div class="video-controls" id="videoControls" style="display: none;">
                    <button class="control-btn upload-btn" id="uploadNewVideoBtn">Yeni Video YÃ¼kle</button>
                    <button class="control-btn delete-btn" id="deleteVideoBtn">Videoyu Sil</button>
                </div>
            </div>

            <div class="chat-section">
                <div class="messages" id="messagesContainer"></div>
                <div class="input-container">
                    <textarea id="messageInput" class="message-input" placeholder="MesajÄ±nÄ±zÄ± yazÄ±n..." rows="1"></textarea>
                    <button id="sendButton" class="send-button">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="users-sidebar">
                <h3>Odadaki KiÅŸiler</h3>
                <div id="usersList"></div>
            </div>
        </div>
    </div>

    <script>
        class VideoPlatform {
            constructor() {
                this.socket = null;
                this.userId = localStorage.getItem('userId') || this.generateId();
                this.userName = localStorage.getItem('userName') || '';
                this.userPhoto = localStorage.getItem('userPhoto') || '';
                this.deviceId = this.getDeviceId();
                this.roomCode = null;
                this.roomName = null;
                this.isOwner = false;
                this.userColor = this.generateColor(this.userName);
                this.currentAction = null;

                this.initElements();
                this.initEvents();
                this.showLanding();
            }

            generateId() {
                const id = 'user_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('userId', id);
                return id;
            }

            getDeviceId() {
                let deviceId = localStorage.getItem('deviceId');
                if (!deviceId) {
                    deviceId = 'device_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
                    localStorage.setItem('deviceId', deviceId);
                }
                return deviceId;
            }

            generateColor(username) {
                const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7'];
                const index = username ? username.split('').reduce((acc, c) => acc + c.charCodeAt(0), 0) : 0;
                return colors[index % colors.length];
            }

            initElements() {
                this.landingPage = document.getElementById('landingPage');
                this.createRoomBtn = document.getElementById('createRoomBtn');
                this.joinRoomBtn = document.getElementById('joinRoomBtn');
                this.userInfoModal = document.getElementById('userInfoModal');
                this.userNameInput = document.getElementById('userNameInput');
                this.userPhotoInput = document.getElementById('userPhotoInput');
                this.cancelUserInfo = document.getElementById('cancelUserInfo');
                this.confirmUserInfo = document.getElementById('confirmUserInfo');
                this.createRoomModal = document.getElementById('createRoomModal');
                this.roomNameInput = document.getElementById('roomNameInput');
                this.roomPasswordInput = document.getElementById('roomPasswordInput');
                this.cancelCreateRoom = document.getElementById('cancelCreateRoom');
                this.confirmCreateRoom = document.getElementById('confirmCreateRoom');
                this.joinRoomModal = document.getElementById('joinRoomModal');
                this.roomCodeInput = document.getElementById('roomCodeInput');
                this.joinPasswordInput = document.getElementById('joinPasswordInput');
                this.cancelJoinRoom = document.getElementById('cancelJoinRoom');
                this.confirmJoinRoom = document.getElementById('confirmJoinRoom');
                this.chatInterface = document.getElementById('chatInterface');
                this.roomNameDisplay = document.getElementById('roomNameDisplay');
                this.roomCodeDisplay = document.getElementById('roomCodeDisplay');
                this.onlineCount = document.getElementById('onlineCount');
                this.videoContainer = document.getElementById('videoContainer');
                this.noVideo = document.getElementById('noVideo');
                this.uploadZone = document.getElementById('uploadZone');
                this.videoPlayer = document.getElementById('videoPlayer');
                this.videoControls = document.getElementById('videoControls');
                this.messagesContainer = document.getElementById('messagesContainer');
                this.messageInput = document.getElementById('messageInput');
                this.sendButton = document.getElementById('sendButton');
                this.usersList = document.getElementById('usersList');
                this.videoFileInput = document.getElementById('videoFileInput');
                this.selectVideoBtn = document.getElementById('selectVideoBtn');
                this.uploadNewVideoBtn = document.getElementById('uploadNewVideoBtn');
                this.deleteVideoBtn = document.getElementById('deleteVideoBtn');
            }

            initEvents() {
                this.createRoomBtn.addEventListener('click', () => this.startCreateRoom());
                this.joinRoomBtn.addEventListener('click', () => this.startJoinRoom());
                this.cancelUserInfo.addEventListener('click', () => this.hideModal(this.userInfoModal));
                this.confirmUserInfo.addEventListener('click', () => this.saveUserInfo());
                this.cancelCreateRoom.addEventListener('click', () => this.hideModal(this.createRoomModal));
                this.confirmCreateRoom.addEventListener('click', () => this.createRoom());
                this.cancelJoinRoom.addEventListener('click', () => this.hideModal(this.joinRoomModal));
                this.confirmJoinRoom.addEventListener('click', () => this.joinRoom());
                this.sendButton.addEventListener('click', () => this.sendMessage());
                this.messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });
                this.selectVideoBtn.addEventListener('click', () => this.videoFileInput.click());
                this.uploadNewVideoBtn.addEventListener('click', () => this.videoFileInput.click());
                this.deleteVideoBtn.addEventListener('click', () => this.deleteVideo());
                this.videoFileInput.addEventListener('change', (e) => this.uploadVideo(e.target.files[0]));
                this.videoPlayer.addEventListener('play', () => this.syncVideo(true));
                this.videoPlayer.addEventListener('pause', () => this.syncVideo(false));
                this.videoPlayer.addEventListener('seeked', () => this.syncVideo(!this.videoPlayer.paused));
            }

            showLanding() {
                this.landingPage.style.display = 'flex';
                this.chatInterface.style.display = 'none';
            }

            startCreateRoom() {
                this.currentAction = 'create';
                if (!this.userName) {
                    this.showModal(this.userInfoModal);
                } else {
                    this.showModal(this.createRoomModal);
                }
            }

            startJoinRoom() {
                this.currentAction = 'join';
                if (!this.userName) {
                    this.showModal(this.userInfoModal);
                } else {
                    this.showModal(this.joinRoomModal);
                }
            }

            async saveUserInfo() {
                const userName = this.userNameInput.value.trim();
                if (!userName) {
                    alert('LÃ¼tfen kullanÄ±cÄ± adÄ±nÄ±zÄ± girin!');
                    return;
                }
                this.userName = userName;
                localStorage.setItem('userName', userName);
                const file = this.userPhotoInput.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        this.userPhoto = e.target.result;
                        localStorage.setItem('userPhoto', this.userPhoto);
                        this.proceedWithAction();
                    };
                    reader.readAsDataURL(file);
                } else {
                    this.userPhoto = this.createDefaultAvatar(userName);
                    localStorage.setItem('userPhoto', this.userPhoto);
                    this.proceedWithAction();
                }
                this.hideModal(this.userInfoModal);
            }

            proceedWithAction() {
                if (this.currentAction === 'create') {
                    this.showModal(this.createRoomModal);
                } else if (this.currentAction === 'join') {
                    this.showModal(this.joinRoomModal);
                }
            }

            connectSocket() {
                this.socket = io({
                    transports: ['websocket', 'polling'],
                    timeout: 30000
                });

                this.socket.on('connect', () => console.log('âœ… BaÄŸlandÄ±'));

                this.socket.on('room-created', (data) => {
                    this.roomCode = data.roomCode;
                    this.roomName = data.roomName;
                    this.socket.emit('join-room', {
                        roomCode: this.roomCode,
                        userName: this.userName,
                        userPhoto: this.userPhoto,
                        deviceId: this.deviceId
                    });
                });

                this.socket.on('room-joined', (data) => {
                    this.roomCode = data.roomCode;
                    this.roomName = data.roomName;
                    this.isOwner = data.isOwner;
                    this.showChatInterface();
                    if (data.activeVideo) {
                        this.displayVideo(data.activeVideo.url);
                    }
                });

                this.socket.on('user-list-update', (users) => {
                    this.updateUsersList(users);
                    this.onlineCount.textContent = `${users.length} kiÅŸi`;
                });

                this.socket.on('video-uploaded', (data) => {
                    this.displayVideo(data.videoUrl);
                    this.addSystemMessage(`ðŸ“¹ Video yÃ¼klendi: ${data.title || 'Video'}`);
                });

                this.socket.on('video-update', (data) => {
                    if (!this.isOwner) {
                        this.videoPlayer.currentTime = data.currentTime;
                        if (data.playing) {
                            this.videoPlayer.play();
                        } else {
                            this.videoPlayer.pause();
                        }
                    }
                });

                this.socket.on('video-deleted', () => {
                    this.hideVideo();
                    this.addSystemMessage('ðŸ“¹ Video silindi');
                });

                this.socket.on('message', (msg) => this.displayMessage(msg));
                this.socket.on('user-joined', (data) => this.addSystemMessage(`${data.userName} odaya katÄ±ldÄ±`));
                this.socket.on('user-left', (data) => this.addSystemMessage(`${data.userName} odadan ayrÄ±ldÄ±`));
                this.socket.on('error', (data) => alert(data.message));
            }

            createRoom() {
                const roomName = this.roomNameInput.value.trim();
                const password = this.roomPasswordInput.value.trim();
                if (!roomName) {
                    alert('LÃ¼tfen oda adÄ±nÄ± girin!');
                    return;
                }
                this.hideModal(this.createRoomModal);
                this.connectSocket();
                this.socket.emit('create-room', {
                    userName: this.userName,
                    userPhoto: this.userPhoto,
                    deviceId: this.deviceId,
                    roomName: roomName,
                    password: password || null
                });
            }

            joinRoom() {
                const roomCode = this.roomCodeInput.value.trim().toUpperCase();
                const password = this.joinPasswordInput.value.trim();
                if (!roomCode || roomCode.length !== 6) {
                    alert('LÃ¼tfen geÃ§erli 6 haneli oda kodunu girin!');
                    return;
                }
                this.hideModal(this.joinRoomModal);
                this.connectSocket();
                this.socket.emit('join-room', {
                    roomCode: roomCode,
                    userName: this.userName,
                    userPhoto: this.userPhoto,
                    deviceId: this.deviceId,
                    password: password || null
                });
            }

            showChatInterface() {
                this.landingPage.style.display = 'none';
                this.chatInterface.style.display = 'flex';
                this.roomNameDisplay.textContent = this.roomName;
                this.roomCodeDisplay.textContent = this.roomCode;
                if (this.isOwner) {
                    this.uploadZone.style.display = 'block';
                    this.videoControls.style.display = 'flex';
                }
            }

            async uploadVideo(file) {
                if (!file || !this.isOwner) return;
                const reader = new FileReader();
                reader.onload = async (e) => {
                    this.noVideo.innerHTML = '<div class="loading">ðŸ“¤ Video yÃ¼kleniyor...</div>';
                    this.socket.emit('upload-video', {
                        videoBase64: e.target.result,
                        title: file.name
                    });
                };
                reader.readAsDataURL(file);
            }

            displayVideo(url) {
                this.noVideo.style.display = 'none';
                this.videoPlayer.style.display = 'block';
                this.videoPlayer.src = url;
            }

            hideVideo() {
                this.noVideo.style.display = 'block';
                this.videoPlayer.style.display = 'none';
                this.videoPlayer.src = '';
                if (this.isOwner) {
                    this.noVideo.innerHTML = `<div class="no-video-icon">ðŸ“¹</div><h3>Video Yok</h3><p>Yeni video yÃ¼kleyin</p><div class="upload-zone" style="display: block;"><button class="btn btn-primary" onclick="document.getElementById('videoFileInput').click()">Video SeÃ§ ve YÃ¼kle</button></div>`;
                }
            }

            syncVideo(playing) {
                if (!this.isOwner) return;
                this.socket.emit('video-sync', {
                    playing: playing,
                    currentTime: this.videoPlayer.currentTime
                });
            }

            deleteVideo() {
                if (!this.isOwner) return;
                if (confirm('Videoyu silmek istediÄŸinizden emin misiniz?')) {
                    this.socket.emit('delete-video');
                }
            }

            sendMessage() {
                const text = this.messageInput.value.trim();
                if (!text) return;
                this.socket.emit('message', {
                    id: Date.now().toString(),
                    text: text,
                    type: 'text'
                });
                this.messageInput.value = '';
            }

            displayMessage(msg) {
                const isOwn = msg.userName === this.userName;
                const messageEl = document.createElement('div');
                messageEl.className = `message ${isOwn ? 'own' : ''}`;
                messageEl.innerHTML = `
                    <img src="${msg.userPhoto || this.createDefaultAvatar(msg.userName)}" class="message-avatar" alt="${msg.userName}">
                    <div class="message-content" style="background: ${isOwn ? '#667eea' : msg.userColor};">
                        <div class="message-sender">${msg.userName}</div>
                        <div class="message-text">${this.escapeHtml(msg.text)}</div>
                        <div class="message-time">${msg.time}</div>
                    </div>
                `;
                this.messagesContainer.appendChild(messageEl);
                this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
            }

            addSystemMessage(text) {
                const msgEl = document.createElement('div');
                msgEl.style.cssText = 'align-self: center; background: rgba(255,255,255,0.1); padding: 8px 16px; border-radius: 15px; font-size: 13px; color: #ccc; margin: 5px 0;';
                msgEl.textContent = text;
                this.messagesContainer.appendChild(msgEl);
                this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
            }

            updateUsersList(users) {
                this.usersList.innerHTML = '';
                users.forEach(user => {
                    const userEl = document.createElement('div');
                    userEl.className = 'user-item';
                    userEl.innerHTML = `
                        <img src="${user.userPhoto || this.createDefaultAvatar(user.userName)}" class="user-avatar" alt="${user.userName}">
                        <div class="user-name">${user.userName}${user.isOwner ? '<span class="owner-badge">Oda Sahibi</span>' : ''}</div>
                    `;
                    this.usersList.appendChild(userEl);
                });
            }

            createDefaultAvatar(username) {
                const firstLetter = username ? username.charAt(0).toUpperCase() : '?';
                const color = this.generateColor(username);
                return `data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="${color}"/><text x="50" y="60" font-family="Arial" font-size="40" text-anchor="middle" fill="white">${firstLetter}</text></svg>`;
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            showModal(modal) {
                modal.classList.add('active');
            }

            hideModal(modal) {
                modal.classList.remove('active');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new VideoPlatform();
        });
    </script>
</body>
</html>
